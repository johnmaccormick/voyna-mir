<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>All Characters</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  </head>
  <body>
    <h2>All Characters</h2>
    <ul id="character-list">
      <li>Loading...</li>
    </ul>

    <script type="module">
      import { client } from "./supabaseClient.js";

      async function loadAllCharacters() {
        const { data, error } = await client
          .from("characters")
          .select("name, russian_name")
          .order("id");

        const list = document.getElementById("character-list");
        list.innerHTML = ""; // Clear "Loading..."

        if (error) {
          const li = document.createElement("li");
          li.textContent = "Error: " + error.message;
          list.appendChild(li);
          return;
        }

        if (!data || data.length === 0) {
          const li = document.createElement("li");
          li.textContent = "No characters found.";
          list.appendChild(li);
          return;
        }

        for (const character of data) {
          const li = document.createElement("li");
          li.textContent = `English: ${character.name} | Russian: ${character.russian_name}`;
          list.appendChild(li);
        }
      }

      loadAllCharacters();
    </script>
  </body>
</html>
